{% extends 'layout.html' %}
{% load usuarios_tags %} 
{% load widget_tweaks %}

{% block content %}
    {% if user|sector:"Medico" or user|sector:"Gerencia" %}
        <div class="row">
            <form method="post">
                {% csrf_token %}
                <div class="container pt-3">
                    <h1 class="display-5 text-center my-3">{{titulo}}</h1>

                    {% include 'componentes/forms_errors.html' %}

                    <!-- Historial Medico -->
                    <div class="row d-flex justify-content-center">
                        <!-- Motivo -->
                        <div class="col-6">
                            <div class="my-3">
                                <label class="form-label">
                                    {{form.motivo_consulta.label|upper}}
                                </label>
                                {{form.motivo_consulta|attr:'autocomplete:off'|attr:'autofocus:on'|add_class:'form-control text-center rounded'}}
                            </div>
                        </div>
                    </div>

                    <!-- Especialidad -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-3">
                            <div class="my-3">
                                <label class="form-label">{{form.especialidad.label|upper}}
                                    <!-- Texto de ayuda -->
                                    <small class="form-text text-muted">{{ form.especialidad.help_text }}</small>
                                </label>
                                {{form.especialidad|add_class:'form-control rounded'}}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Tratamiento -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-5">
                            <div class="my-3">
                                <label class="form-label">{{form.tratamientos.label|upper}}
                                    <!-- Texto de ayuda -->
                                    <small class="form-text text-muted">{{ form.tratamientos.help_text }}</small>
                                </label>
                                {{form.tratamientos|add_class:'form-control rounded'}}
                            </div>
                        </div>
                    </div>
                    <!-- Procedimientos -->
                    <div class="row d-flex justify-content-center">
                        <div class="col-5">
                            <div class="my-3">
                                <label class="form-label">{{form.procedimientos.label|upper}}
                                    <small class="form-text text-muted">{{ form.procedimientos.help_text }}</small>
                                </label>
                                {{form.procedimientos|add_class:'form-control rounded'}}
                            </div>
                        </div>
                    </div>

                    
                    <div class="d-flex justify-content-center">
                        <div class="btn-group shadow-sm" role="group" aria-label="Basic outlined example">
                            <a href="{{url_volver}}" type="button" class="btn btn-outline-primary">
                                <i class="fas fa-angle-double-left text-info"></i> Volver
                            </a>
                            <button type="submit" class="btn btn-outline-primary">
                                <i class="fas fa-check text-info"></i> Guardar
                            </button>
                        </div>
                    </div>

                </div>
            </form>
        </div>
    {% else %}
        <div class="row d-flex justify-content-center">
            <div class="col-8">
                <h1 class="text-center my-5 lead">No tienes permiso para cargar o modificar el historial de consultas</h1>
            </div>
        </div>
    {% endif %}
{% endblock %}